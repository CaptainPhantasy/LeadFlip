# LeadFlip Navigation Structure

## Visual Navigation Map

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           LeadFlip Navigation Bar                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                               ‚îÇ
‚îÇ  [LeadFlip Logo]  |  PUBLIC LINKS  |  AUTH LINKS  |  ADMIN  |  [User Menu]  ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

PUBLIC LINKS (Always Visible)
‚îú‚îÄ‚îÄ Home (/)
‚îú‚îÄ‚îÄ Post a Problem (/consumer)
‚îú‚îÄ‚îÄ For Businesses (/business)
‚îú‚îÄ‚îÄ Pricing (/pricing)
‚îú‚îÄ‚îÄ About (/about)
‚îî‚îÄ‚îÄ Contact (/contact)

AUTHENTICATED LINKS (Visible When Signed In)
‚îú‚îÄ‚îÄ Consumer Dashboard (/consumer/dashboard)
‚îú‚îÄ‚îÄ Business Dashboard (/business)
‚îî‚îÄ‚îÄ Business Settings (/business/settings) ‚≠ê NEW

ADMIN LINKS (Visible When role = "admin")
‚îú‚îÄ‚îÄ Admin Dashboard (/admin) [PRIMARY COLOR]
‚îú‚îÄ‚îÄ Users (/admin/users) [PRIMARY COLOR] ‚≠ê NEW
‚îî‚îÄ‚îÄ Audit Log (/admin/audit) [PRIMARY COLOR] ‚≠ê NEW
```

## Mobile Navigation Structure

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    [‚ò∞]  Mobile Menu             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                 ‚îÇ
‚îÇ  PUBLIC SECTION                 ‚îÇ
‚îÇ  ‚îú‚îÄ üìû Home                     ‚îÇ
‚îÇ  ‚îú‚îÄ üìû Post a Problem           ‚îÇ
‚îÇ  ‚îú‚îÄ üíº For Businesses           ‚îÇ
‚îÇ  ‚îú‚îÄ üíµ Pricing                  ‚îÇ
‚îÇ  ‚îú‚îÄ ‚ÑπÔ∏è  About                   ‚îÇ
‚îÇ  ‚îî‚îÄ ‚úâÔ∏è  Contact                 ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  AUTHENTICATED SECTION          ‚îÇ
‚îÇ  ‚îú‚îÄ üìä Consumer Dashboard       ‚îÇ
‚îÇ  ‚îú‚îÄ üìä Business Dashboard       ‚îÇ
‚îÇ  ‚îî‚îÄ ‚öôÔ∏è  Business Settings      ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ADMIN SECTION                  ‚îÇ
‚îÇ  ‚îú‚îÄ üõ°Ô∏è  Admin Dashboard         ‚îÇ
‚îÇ  ‚îú‚îÄ üë• Users                    ‚îÇ
‚îÇ  ‚îî‚îÄ üìÑ Audit Log                ‚îÇ
‚îÇ                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Route Protection Matrix

| Route                  | Public | Auth Required | Admin Required | Component                |
|------------------------|--------|---------------|----------------|--------------------------|
| `/`                    | ‚úÖ     | ‚ùå            | ‚ùå             | Home Page                |
| `/about`               | ‚úÖ     | ‚ùå            | ‚ùå             | About Page               |
| `/contact`             | ‚úÖ     | ‚ùå            | ‚ùå             | Contact Page             |
| `/pricing`             | ‚úÖ     | ‚ùå            | ‚ùå             | Pricing Page             |
| `/consumer`            | ‚ùå     | ‚úÖ            | ‚ùå             | Lead Submission Form     |
| `/consumer/dashboard`  | ‚ùå     | ‚úÖ            | ‚ùå             | Consumer Dashboard       |
| `/business`            | ‚ùå     | ‚úÖ            | ‚ùå             | Business Dashboard       |
| `/business/settings`   | ‚ùå     | ‚úÖ            | ‚ùå             | Business Settings ‚≠ê     |
| `/admin`               | ‚ùå     | ‚úÖ            | ‚úÖ             | Admin Dashboard          |
| `/admin/users`         | ‚ùå     | ‚úÖ            | ‚úÖ             | User Management ‚≠ê       |
| `/admin/audit`         | ‚ùå     | ‚úÖ            | ‚úÖ             | Audit Log Viewer ‚≠ê      |

‚≠ê = Newly created route

## Admin Role Setup

### How to Set Admin Role in Clerk:

1. **Via Clerk Dashboard:**
   ```
   1. Go to https://dashboard.clerk.com
   2. Select your application
   3. Navigate to Users
   4. Click on user
   5. Scroll to "Public metadata"
   6. Add: {"role": "admin"}
   7. Save
   ```

2. **Via Clerk API:**
   ```javascript
   await clerkClient.users.updateUserMetadata(userId, {
     publicMetadata: {
       role: "admin"
     }
   });
   ```

3. **Detection in Code:**
   ```typescript
   const { user } = useUser()
   const isAdmin = user?.publicMetadata?.role === "admin"
   ```

## Confirmation Dialog Usage

### Component Location:
`/Volumes/Storage/Development/LegacyCall/src/components/ui/confirm-dialog.tsx`

### Props Interface:
```typescript
interface ConfirmDialogProps {
  open: boolean              // Controls dialog visibility
  onClose: () => void        // Called when dialog closes
  onConfirm: () => void      // Called when user confirms
  title: string              // Dialog title
  description: string        // Dialog description
  isDestructive?: boolean    // Red styling for destructive actions
  confirmText?: string       // Confirm button text (default: "Continue")
  cancelText?: string        // Cancel button text (default: "Cancel")
}
```

### Usage Patterns:

#### 1. Destructive Action (Delete, Remove, etc.)
```tsx
<ConfirmDialog
  open={showDialog}
  onClose={() => setShowDialog(false)}
  onConfirm={handleDelete}
  title="Delete this item?"
  description="This action cannot be undone."
  isDestructive={true}
  confirmText="Delete"
  cancelText="Cancel"
/>
```

#### 2. Important Action (Logout, Submit, etc.)
```tsx
<ConfirmDialog
  open={showDialog}
  onClose={() => setShowDialog(false)}
  onConfirm={handleLogout}
  title="Are you sure you want to logout?"
  description="You will need to sign in again."
  confirmText="Logout"
  cancelText="Stay Logged In"
/>
```

#### 3. Warning Action (Change Settings, etc.)
```tsx
<ConfirmDialog
  open={showDialog}
  onClose={() => setShowDialog(false)}
  onConfirm={handleChange}
  title="Important Warning"
  description="This will affect your account settings."
  confirmText="I Understand"
  cancelText="Go Back"
/>
```

## Icon Reference

| Icon          | Purpose                  | Location              |
|---------------|--------------------------|----------------------|
| Phone         | Logo, Consumer links     | Navigation, Pages    |
| LayoutDashboard | Dashboards             | Navigation           |
| DollarSign    | Pricing                  | Navigation           |
| Info          | About                    | Navigation           |
| Mail          | Contact                  | Navigation           |
| Shield        | Admin Dashboard          | Navigation           |
| Settings      | Business Settings        | Navigation ‚≠ê        |
| Users         | User Management          | Navigation ‚≠ê        |
| FileText      | Audit Log                | Navigation ‚≠ê        |

‚≠ê = Newly added icon

## Color Coding

- **Public Links**: `text-foreground/80` (gray)
- **Authenticated Links**: `text-foreground/80` (gray)
- **Admin Links**: `text-primary` (red/primary color)
- **Hover States**: `hover:text-foreground` or `hover:text-primary/80`

## Responsive Breakpoints

- **Desktop**: `md:flex` - Shows horizontal navigation bar
- **Mobile**: `md:hidden` - Shows hamburger menu
- **Mobile Menu Width**: `w-[300px] sm:w-[400px]`

## Testing Matrix

### ‚úÖ Completed Tests

| Test Case                          | Status | Expected Result                          |
|------------------------------------|--------|------------------------------------------|
| Visit public routes (not signed in) | ‚úÖ    | Pages load without authentication        |
| Visit protected routes (not signed in) | ‚úÖ | Redirect to Clerk sign-in               |
| Navigation shows public links      | ‚úÖ    | Always visible                           |
| Navigation shows auth links (signed in) | ‚úÖ | Visible when authenticated              |
| Navigation hides auth links (signed out) | ‚úÖ | Hidden when not authenticated          |
| Navigation shows admin links (admin role) | ‚úÖ | Visible when role = "admin"           |
| Navigation hides admin links (no role) | ‚úÖ | Hidden when role ‚â† "admin"             |
| Mobile menu toggles correctly      | ‚úÖ    | Opens/closes on hamburger click          |
| Confirmation dialog opens/closes   | ‚úÖ    | Controlled by open prop                  |
| Confirmation dialog confirms action | ‚úÖ   | Calls onConfirm and closes              |
| Confirmation dialog cancels action | ‚úÖ    | Only closes, no callback                |
| Destructive styling applies        | ‚úÖ    | Red button when isDestructive=true       |

## Summary

### Created:
- ‚úÖ 1 new reusable component (`ConfirmDialog`)
- ‚úÖ 3 new page routes (`business/settings`, `admin/users`, `admin/audit`)
- ‚úÖ 3 new navigation sections (properly organized)
- ‚úÖ Admin role detection system
- ‚úÖ Complete documentation

### Updated:
- ‚úÖ Navigation component with all routes
- ‚úÖ Added 3 new Lucide icons
- ‚úÖ Mobile navigation structure

### Total Routes: 11
### Total Components: 1 new UI component
### Total Icons: 3 new icons
### Documentation Files: 3

**All routes are accessible and navigation is complete!** üéâ
